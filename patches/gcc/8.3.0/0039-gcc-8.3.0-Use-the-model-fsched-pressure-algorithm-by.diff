From 3d19c0f08d6799a9bb67323c917f06e7da3bab2b Mon Sep 17 00:00:00 2001
From: Jiahao Xu <xujiahao@loongson.cn>
Date: Fri, 4 Aug 2023 17:20:34 +0800
Subject: [PATCH 11/13] gcc-8.3.0: Use the model -fsched-pressure algorithm by
 default.

Change-Id: I7fea3ec841e9b11ab0fcf6881719951ecdc14760
---
 src/gcc/config/loongarch/loongarch.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/gcc/config/loongarch/loongarch.c b/src/gcc/config/loongarch/loongarch.c
index f69c87277..b69bb6f94 100644
--- a/src/gcc/config/loongarch/loongarch.c
+++ b/src/gcc/config/loongarch/loongarch.c
@@ -7046,6 +7046,12 @@ loongarch_cpu_option_override (struct loongarch_target *target,
   maybe_set_param_value (PARAM_L2_CACHE_SIZE,
     loongarch_cpu_cache[target->cpu_tune].l2d_size,
     opts->x_param_values, opts_set->x_param_values);
+
+  /* Use the 'model' -fsched-pressure algorithm by default.  */
+  maybe_set_param_value (PARAM_SCHED_PRESSURE_ALGORITHM,
+			 SCHED_PRESSURE_MODEL,
+			 opts->x_param_values,
+			 global_options_set.x_param_values);
 }
 
 static void
-- 
2.31.1

